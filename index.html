<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmileConnector</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- <link rel="stylesheet" href="/assets/stylesheets/home.css"> -->
    <link rel="stylesheet" href="./assets/stylesheets/home.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar" id="navbar">
        <div class="nav-container">
            <a href="#home" class="logo"></a>
            <ul class="nav-links">
                <li><a href="#home" class="nav-link active">Home</a></li>
                <li><a href="#about" class="nav-link">About</a></li>
                <li><a href="#impact" class="nav-link">Impact</a></li>
                <li><a href="#education" class="nav-link">Education</a></li>
                <li><a href="#team" class="nav-link">Team</a></li>
            </ul>
        </div>
    </nav>

   <!-- Home Section -->
    <section id="home" class="home-section">
        <!-- Background Elements -->
        <div class="bg-elements">
            <div class="floating-shape shape-1"></div>
            <div class="floating-shape shape-2"></div>
            <div class="floating-shape shape-3"></div>
        </div>

        <!-- Particle System -->
        <div class="particles" id="particles"></div>

        <div class="home-container">
            <div class="home-content">
                <h1>Transform Your Smile</h1>
                
                <div class="rotating-text">
                    <div class="text-item active">
                        <h2>Professional Dental Care</h2>
                        <p>Experience world-class dental services with cutting-edge technology and compassionate care for your entire family.</p>
                    </div>
                    <div class="text-item">
                        <h2>Advanced Treatment Options</h2>
                        <p>From routine cleanings to complex procedures, we offer comprehensive dental solutions tailored to your unique needs.</p>
                    </div>
                    <div class="text-item">
                        <h2>Your Smile, Our Passion</h2>
                        <p>Join thousands of satisfied patients who have transformed their oral health and confidence with our expert team.</p>
                    </div>
                </div>

                <div class="text-indicators">
                    <div class="indicator active" data-index="0"></div>
                    <div class="indicator" data-index="1"></div>
                    <div class="indicator" data-index="2"></div>
                </div>
                <div class="cta-buttons">
                    <a href="#" id="loginBtn" class="btn-primary">Login</a>
                    <a href="#" id="signupBtn" class="btn-secondary">Sign up</a>
                </div>


            </div>
        </div>

        <!-- Scroll Indicator -->
        <div class="scroll-indicator">
            <span class="scroll-text">SCROLL DOWN</span>
            <div class="scroll-arrow"></div>
        </div>
    </section>

       <!-- About Section -->
    <section id="about">
        <div class="about-container">
            <div class="about-header">
                <h2>Creating Beautiful Smiles daily</h2>
                <p>Our mission is to provide exceptional dental care in a comfortable and welcoming environment.</p>
            </div>
            
            <div class="about-content">
                <div class="about-text">
                    <h3>Our Comprehensive Approach</h3>
                    <p>At SmileConnector, we believe in a holistic approach to dental health. Our team of experienced professionals combines the latest technology with personalized care to ensure the best outcomes for our patients.</p>
                    <p>We understand that visiting the dentist can be stressful for some, which is why we've created a calming environment with amenities designed to make your visit as comfortable as possible.</p>
                    <button id="open-slideshow" class="book-btn" style="margin-top: 20px;">Discover more about our Dental Program</button>
                </div>
                <div class="about-image">
                    <img src="https://tse1.explicit.bing.net/th/id/OIP.XT57y4PoNtdJJAmvZLMUiQHaE2?cb=ucfimg2&ucfimg=1&rs=1&pid=ImgDetMain&o=7&rm=3" alt="Dental Team">
                </div>
            </div>

            <!-- Modal Slideshow -->
            <div id="slideshow-modal" class="modal">
                <div class="slideshow-container">
                    <span class="close">&times;</span>
                    
                    <!-- Slide 1 -->
                    <div class="slide active">
                        <img src="https://smilesatfrance.com/wp-content/uploads/2020/05/dental-technology.jpg" alt="Advanced Technology" class="slide-image">
                        <div class="slide-content">
                            <h4>Advanced Technology</h4>
                            <p>Our state-of-the-art equipment includes digital X-rays, intraoral cameras, and laser dentistry tools. We use the latest technology to provide precise diagnoses and comfortable treatments, ensuring you receive the highest quality care with minimal discomfort.</p>
                        </div>
                    </div>

                    <!-- Slide 2 -->
                    <div class="slide">
                        <img src="https://medix-global.com/wp-content/uploads/2023/08/shutterstock_1260058669-003-scaled.jpg" alt="Preventive Care" class="slide-image">
                        <div class="slide-content">
                            <h4>Prevention First</h4>
                            <p>We focus on preventive care to help you maintain optimal oral health. Our comprehensive cleanings, fluoride treatments, and educational programs are designed to prevent dental problems before they start, saving you time and money in the long run.</p>
                        </div>
                    </div>

                    <!-- Slide 3 -->
                    <div class="slide">
                        <img src="https://images.unsplash.com/photo-1594824476967-48c8b964273f?ixlib=rb-4.0.3&auto=format&fit=crop&w=900&q=80" alt="Cosmetic Dentistry" class="slide-image">
                        <div class="slide-content">
                            <h4>Cosmetic Excellence</h4>
                            <p>Transform your smile with our cosmetic dentistry services. From teeth whitening and veneers to complete smile makeovers, we help you achieve the confident, beautiful smile you've always wanted using the latest aesthetic techniques.</p>
                        </div>
                    </div>

                    <!-- Slide 4 -->
                    <div class="slide">
                        <img src="https://images.unsplash.com/photo-1576091160550-2173dba999ef?ixlib=rb-4.0.3&auto=format&fit=crop&w=900&q=80" alt="Comfortable Environment" class="slide-image">
                        <div class="slide-content">
                            <h4>Comfort & Care</h4>
                            <p>Our relaxing environment features comfortable seating, calming music, and amenities to help you feel at ease. We offer sedation options for anxious patients and ensure every visit is as comfortable and stress-free as possible.</p>
                        </div>
                    </div>

                    <!-- Slide 5 -->
                    <div class="slide">
                        <img src="https://images.unsplash.com/photo-1550831107-1553da8c8464?ixlib=rb-4.0.3&auto=format&fit=crop&w=900&q=80" alt="Expert Team" class="slide-image">
                        <div class="slide-content">
                            <h4>Expert Team</h4>
                            <p>Our experienced team of dental professionals is committed to continuing education and staying current with the latest techniques. With years of combined experience, we provide expert care you can trust for all your dental needs.</p>
                        </div>
                    </div>

                    <!-- Navigation arrows -->
                    <button class="nav-arrow prev">&#10094;</button>
                    <button class="nav-arrow next">&#10095;</button>

                    <!-- Slide indicators -->
                    <div class="indicators">
                        <span class="dot active" onclick="currentSlide(1)"></span>
                        <span class="dot" onclick="currentSlide(2)"></span>
                        <span class="dot" onclick="currentSlide(3)"></span>
                        <span class="dot" onclick="currentSlide(4)"></span>
                        <span class="dot" onclick="currentSlide(5)"></span>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    

    <!-- Impact Section -->
    <section class="global-impact-section" id="impact">
        <div class="impact-container">
            <h1>Our Global Impact</h1>
            
           <div class="impact-row">
                <div class="impact-card">
                    <div class="impact-card-header">
                    <h2>Geographic Reach</h2>
                    </div>
                    <div class="impact-card-body">
                    <div class="map-container" id="map-container">
                        <div id="map">
                        <!-- Loading state -->
                        <div class="map-loading">
                            <p>Loading map...</p>
                        </div>
                        </div>
                    </div>
                    </div>
                </div>
            </div>
            
            <!-- <div class="metrics-grid">
                <div class="metric-box">
                    <div class="metric-value" data-target="15000">0</div>
                    <div class="metric-label">Patients Treated</div>
                </div>
                
                <div class="metric-box">
                    <div class="metric-value" data-target="50">0</div>
                    <div class="metric-label">Communities Served</div>
                </div>
                
                <div class="metric-box">
                    <div class="metric-value" data-target="200">0</div>
                    <div class="metric-label">Free Screenings</div>
                </div>
                
                <div class="metric-box">
                    <div class="metric-value" data-target="95">0</div>
                    <div class="metric-label">Patient Satisfaction</div>
                </div>
            </div> -->
        </div>
    </section>

    <!-- Education Section -->
    <section id="education" class="section education-section">
        <div class="section-container">
            <h2 class="reveal">Education & Resources</h2>
            
            <div class="resources-grid">
                <!-- Videos Card -->
                <div class="resource-card" id="videos-card">
                    <div class="card-content">
                        <div>
                            <h2>Videos</h2>
                            <p>Regular check-ups, cleanings, and preventative care to maintain your oral health and prevent future problems.</p>
                        </div>
                        <a href="#" class="learn-more" id="videos-link">Learn More</a>
                    </div>
                </div>
                
                <!-- 3D Models Card -->
                <div class="resource-card" id="models-card">
                    <div class="card-content">
                        <div>
                            <h2>Dental 3D Interactive Models</h2>
                            <p>Enhance your smile with teeth whitening, veneers, bonding, and other aesthetic procedures.</p>
                        </div>
                        <a href="#" class="learn-more" id="models-link">Learn More</a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Team Section -->
    <section id="team" class="section team-section">
        <div class="parallax-element parallax-square" style="top: 10%; right: 20%;"></div>
            <div class="parallax-element parallax-circle" style="bottom: 25%; left: 10%;"></div>
            <div class="section-container">
                <h2 class="section-title fade-in-up">Our Team</h2>


                <!-- Team Cards -->
                <div class="team-grid">
                    <!-- Doctor 1 -->
                    <div class="doctor-card">
                        <div class="floating-elements">
                            <div class="floating-circle"></div>
                            <div class="floating-circle"></div>
                            <div class="floating-circle"></div>
                        </div>
                        <div class="specialty-badge">Director</div>
                        <div class="experience-indicator">15+ Years</div>
                        <div class="doctor-image-container">
                            <img src="./assets/images/kinder.jpg" alt="Ms Kinder" class="doctor-image">
                        </div>
                        <div class="doctor-info">
                            <h3 class="doctor-name">Kinder Modisha</h3>
                            <p class="doctor-specialty">Director</p>
                            <p class="doctor-description">
                               Visionary founder and leader of SmileConnector, driving strategic initiatives and ensuring excellence in dental outreach programs across communities.
                            </p>
                        </div>
                    </div>

                    <!-- Doctor 2 -->
                    <div class="doctor-card">
                        <div class="floating-elements">
                            <div class="floating-circle"></div>
                            <div class="floating-circle"></div>
                            <div class="floating-circle"></div>
                        </div>
                        <div class="specialty-badge">Logistics Officer</div>
                        <div class="experience-indicator">2nd year BIT student</div>
                        <div class="doctor-image-container">
                            <img src="./assets/images/kgopotso.jpg" alt="Kgopotso Molekoa" class="doctor-image">
                        </div>
                        <div class="doctor-info">
                            <h3 class="doctor-name">Kgopotso Molekoa</h3>
                            <p class="doctor-specialty">Logistics Officer</p>
                             <p class="doctor-description">
                               Oversees the coordination and delivery of dental kits, equipment, and outreach schedules to ensure smooth field operations.
                            </p> 
                        </div>
                    </div>

                    <!-- Doctor 3 -->
                    <div class="doctor-card">
                        <div class="floating-elements">
                            <div class="floating-circle"></div>
                            <div class="floating-circle"></div>
                            <div class="floating-circle"></div>
                        </div>
                        <div class="specialty-badge">Marketing Officer</div>
                        <div class="experience-indicator">2nd year BIT student</div>
                        <div class="doctor-image-container">
                            <img src="./assets/images/masego.jpg" alt="Masego Motsamai" class="doctor-image">
                        </div>
                        <div class="doctor-info">
                            <h3 class="doctor-name">Masego Motsamai</h3>
                            <p class="doctor-specialty">Marketing Officer</p>
                             <p class="doctor-description">
                               Leads marketing strategy, branding, and promotional campaigns to enhance visibility and stakeholder engagement.                            </p> 
                        </div>
                    </div>

                    <!-- Doctor 4 -->
                    <div class="doctor-card">
                        <div class="floating-elements">
                            <div class="floating-circle"></div>
                            <div class="floating-circle"></div>
                            <div class="floating-circle"></div>
                        </div>
                        <div class="specialty-badge">IT Specialist</div>
                        <div class="experience-indicator">2nd year BIT student</div>
                        <div class="doctor-image-container">
                            <img src="./assets/images/divin.jpg" alt="Divin Mathem's" class="doctor-image">
                        </div>
                        <div class="doctor-info">
                            <h3 class="doctor-name">Divin Mathem's</h3>
                            <p class="doctor-specialty">IT Specialist</p>
                           <p class="doctor-description">
                              Develop and maintain the SmileConnector platform, ensuring system reliability, security, and technical support.
                            </p> 
                        </div>
                        
                    </div>

                    <div class="doctor-card">
                        <div class="floating-elements">
                            <div class="floating-circle"></div>
                            <div class="floating-circle"></div>
                            <div class="floating-circle"></div>
                        </div>
                        <div class="specialty-badge">Communications officer</div>
                        <div class="experience-indicator">2nd year BIT student</div>
                        <div class="doctor-image-container">
                            <img src="./assets/images/emmanuel.jpg" alt="Emmanuel Mukanku" class="doctor-image">
                        </div>
                        <div class="doctor-info">
                            <h3 class="doctor-name">Emmanuel Mukanku</h3>
                            <p class="doctor-specialty">communications officer</p>
                            <p class="doctor-description">
                               Manages internal and external communication, public awareness, and community engagement initiatives.
                            </p> 
                        </div>
                    </div>

                        <div class="doctor-card">
                        <div class="floating-elements">
                            <div class="floating-circle"></div>
                            <div class="floating-circle"></div>
                            <div class="floating-circle"></div>
                        </div>
                        <div class="specialty-badge">IT Specialist</div>
                        <div class="experience-indicator">2nd year BIT student</div>
                        <div class="doctor-image-container">
                            <img src="./assets/images/daniel.jpg" alt="Daniel Balepe" class="doctor-image">
                        </div>
                        <div class="doctor-info">
                            <h3 class="doctor-name">Daniel Balepe</h3>
                            <p class="doctor-specialty">IT Specialist</p>
                             <p class="doctor-description">
                               Develop and maintain the SmileConnector platform, ensuring system reliability, security, and technical support.
                            </p> 
                        </div>
                    </div>
                </div>               
                
            </div>
            
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>SmileConnector</h3>
                    <p>Providing exceptional dental care with advanced technology and compassionate service. Your smile is our passion, and your health is our priority.</p>
                    <div class="social-links">
                        <a href="https://www.facebook.com/share/1AtQvAA8zQ/?mibextid=wwXIfr" class="social-link" title="Facebook" target="_blank">
                            <i class="fab fa-facebook-f"></i>
                        </a>

                        <a href="https://www.instagram.com/smile_connector_/?igsh=ejRoMjAxeW5rZmFu&utm_source=qr#" class="social-link" title="Instagram" target="_blank">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="https://www.linkedin.com/in/smile-connector-a00639368/" class="social-link" title="LinkedIn" target="_blank">
                            <i class="fab fa-linkedin-in"></i>
                        </a>
                        <a href="https://wa.me/27678352384?text=Hello%2C%20I'm%20interested%20in%20your%20services!" class="social-link" title="WhatsApp" target="_blank">
                            <i class="fab fa-whatsapp"></i>
                        </a>
                    </div>

                </div>

                <div class="footer-section">
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="#home">Home</a></li>
                        <li><a href="#about">About Us</a></li>
                        <li><a href="#impact">Our Impact</a></li>
                        <li><a href="#education">Education</a></li>
                        <li><a href="#team">Our Team</a></li>
                    </ul>
                </div>

                <div class="footer-section">
                    <h3>Contact Info</h3>
                    <!-- <div class="contact-info">
                        <i>üìç</i>
                        <p>123 Dental Street, Medical District<br>City, State 12345</p>
                    </div> -->
                    <div class="contact-info">
                        <i>üìû</i>
                        <p>+27 82 332 7135</p>
                    </div>
                    <div class="contact-info">
                        <i>‚úâÔ∏è</i>
                        <p>kinder@smileconnector.org.co.za</p>
                    </div>
                </div>

                <!-- <div class="footer-section">
                    <div class="newsletter">
                        <h3>Stay Updated</h3>
                        <p>Subscribe to our newsletter for dental health tips and practice updates.</p>
                        <form class="newsletter-form">
                            <input type="email" class="newsletter-input" placeholder="Enter your email" required>
                            <button type="submit" class="newsletter-btn">Subscribe</button>
                        </form>
                    </div>
                </div> -->
            </div>

            <div class="footer-bottom">
                <p>&copy; 2025 SmileConnector. All rights reserved.</p>
                <div class="footer-links">
                    <a href="#">Terms of Service</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- <script src="/assets/scripts/testing.js"> </script> -->

<!-- Google Maps API (make sure your API key is restricted in your Google Cloud Console) -->
<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDnu99zZwlwPmaRdFvSF82ECLPBKmwpKgg&callback=initMap"></script>
<script>
    // Navbar scroll effect
    window.addEventListener('scroll', function () {
        const navbar = document.getElementById('navbar');
        if (navbar) {
            navbar.classList.toggle('scrolled', window.scrollY > 50);
        }
    });

    // Smooth scrolling for navigation links + Active Section Highlight
    document.addEventListener('DOMContentLoaded', function () {
        const navLinks = document.querySelectorAll('.nav-link');
        const sections = document.querySelectorAll('.section, .home-section');

        navLinks.forEach(link => {
            link.addEventListener('click', function (e) {
                e.preventDefault();
                const targetId = this.getAttribute('href');
                const targetSection = document.querySelector(targetId);
                if (targetSection) {
                    const offsetTop = targetSection.offsetTop - 80;
                    window.scrollTo({ top: offsetTop, behavior: 'smooth' });
                }
                navLinks.forEach(l => l.classList.remove('active'));
                this.classList.add('active');
            });
        });

        window.addEventListener('scroll', function () {
            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                const sectionHeight = section.clientHeight;
                if (window.scrollY >= (sectionTop - 200)) {
                    current = section.getAttribute('id');
                }
            });

            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === '#' + current) {
                    link.classList.add('active');
                }
            });
        });
    });

    // Scroll reveal animation
    function reveal() {
        const reveals = document.querySelectorAll('.reveal');
        for (let i = 0; i < reveals.length; i++) {
            const windowHeight = window.innerHeight;
            const elementTop = reveals[i].getBoundingClientRect().top;
            const elementVisible = 150;
            if (elementTop < windowHeight - elementVisible) {
                reveals[i].classList.add('active');
            } else {
                reveals[i].classList.remove('active');
            }
        }
    }
    window.addEventListener('scroll', reveal);

    // Combined DOMContentLoaded logic for slideshow, tabs, cards
    document.addEventListener('DOMContentLoaded', function () {
        // Slideshow Modal
        let slideIndex = 1;
        const modal = document.getElementById('slideshow-modal');
        const openBtn = document.getElementById('open-slideshow');
        const closeBtn = document.querySelector('.close');
        const prevBtn = document.querySelector('.prev');
        const nextBtn = document.querySelector('.next');

        let autoSlideInterval;

        function showSlide(n) {
            const slides = document.querySelectorAll('.slide');
            const dots = document.querySelectorAll('.dot');

            if (n > slides.length) slideIndex = 1;
            if (n < 1) slideIndex = slides.length;

            slides.forEach(slide => slide.classList.remove('active'));
            dots.forEach(dot => dot.classList.remove('active'));

            slides[slideIndex - 1]?.classList.add('active');
            dots[slideIndex - 1]?.classList.add('active');
        }

        function changeSlide(n) {
            showSlide(slideIndex += n);
        }

        function startAutoSlide() {
            autoSlideInterval = setInterval(() => {
                changeSlide(1);
            }, 5000);
        }

        function stopAutoSlide() {
            clearInterval(autoSlideInterval);
        }

        function closeModal() {
            modal.classList.remove('active');
            document.body.style.overflow = 'auto';
            stopAutoSlide();
        }

        if (openBtn && modal) {
            openBtn.addEventListener('click', function () {
                modal.classList.add('active');
                document.body.style.overflow = 'hidden';
                showSlide(slideIndex);
                startAutoSlide();
            });
        }

        if (closeBtn) closeBtn.addEventListener('click', closeModal);
        if (prevBtn) prevBtn.addEventListener('click', () => { changeSlide(-1); stopAutoSlide(); });
        if (nextBtn) nextBtn.addEventListener('click', () => { changeSlide(1); stopAutoSlide(); });

        document.addEventListener('keydown', function (e) {
            if (modal.classList.contains('active')) {
                if (e.key === 'ArrowLeft') changeSlide(-1);
                else if (e.key === 'ArrowRight') changeSlide(1);
                else if (e.key === 'Escape') closeModal();
            }
        });

        modal?.addEventListener('click', function (e) {
            if (e.target === modal) closeModal();
        });

        document.querySelectorAll('.dot').forEach(dot => {
            dot.addEventListener('click', stopAutoSlide);
        });

        // Tabs
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', function () {
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                this.classList.add('active');
                console.log(`Selected year: ${this.textContent}`);
            });
        });

        // Card click listeners
        const videosCard = document.getElementById('videos-card');
        const modelsCard = document.getElementById('models-card');
        const videosLink = document.getElementById('videos-link');
        const modelsLink = document.getElementById('models-link');

        function openPage(url) {
            window.location.href = url;
        }

        if (videosCard) videosCard.addEventListener('click', (e) => { e.preventDefault(); openPage('../homepage/education-video.html'); });
        if (modelsCard) modelsCard.addEventListener('click', (e) => { e.preventDefault(); openPage('../homepage/education-3dModel.html'); });

        if (videosLink) videosLink.addEventListener('click', function (e) {
            e.preventDefault();
            e.stopPropagation();
            openPage('../homepage/education-video.html');
        });

        if (modelsLink) modelsLink.addEventListener('click', function (e) {
            e.preventDefault();
            e.stopPropagation();
            openPage('../homepage/education-3dModel.html');
        });
    });

    // Implementing the database functionality
let metric_value = document.querySelectorAll('.metric-value');

// Function to animate the counter (optional)
function animateCounter(el, target) {
    const speed = 200; // smaller = faster
    const increment = target / speed;
    let count = 0;

    const update = () => {
        count += increment;
        if (count < target) {
            el.innerText = Math.ceil(count);
            requestAnimationFrame(update);
        } else {
            el.innerText = target;
        }
    };
    update();
}

// 1. Patients Treated
fetch('http://localhost:80/SmileConnector/backend/metric.php?type=students')
    .then(res => res.json())
    .then(data => {
        const target = parseInt(data.students);
        metric_value[0].dataset.target = target;
        animateCounter(metric_value[0], target);
    });

// 2. Communities Served
fetch('http://localhost:80/SmileConnector/backend/metric.php?type=school')
    .then(res => res.json())
    .then(data => {
        const target = parseInt(data.school);
        metric_value[1].dataset.target = target;
        animateCounter(metric_value[1], target);
    });

// 3. Free Screenings
fetch('http://localhost:80/SmileConnector/backend/metric.php?type=treatments')
    .then(res => res.json())
    .then(data => {
        const target = parseInt(data.treatment);
        metric_value[2].dataset.target = target;
        animateCounter(metric_value[2], target);
    });

// 4. Patient Satisfaction
fetch('http://localhost:80/SmileConnector/backend/metric.php?type=teledentistry')
    .then(res => res.json())
    .then(data => {
        const target = parseInt(data.teledentistrycount);
        metric_value[3].dataset.target = target;
        animateCounter(metric_value[3], target);
    });

// Initialize map
function initMap() {
  const map = new google.maps.Map(document.getElementById("map"), {
    center: { lat: -26.2041, lng: 28.0473 }, // Default center (Johannesburg)
    zoom: 7
  });

  // Modified addMarker function that accepts place names
  function addMarkerByPlaceName(map, placeName, title, content, color) {
    const geocoder = new google.maps.Geocoder();
    
    geocoder.geocode({ address: placeName }, (results, status) => {
      if (status === "OK") {
        const location = results[0].geometry.location;
        
        // Create marker with the geocoded location
        const marker = new google.maps.Marker({
          position: location,
          map: map,
          title: title,
          icon: `http://maps.google.com/mapfiles/ms/icons/${color}-dot.png`
        });

        // Add info window if content exists
        if (content) {
          const infowindow = new google.maps.InfoWindow({
            content: `<strong>${title}</strong><br>${content}`
          });
          
          marker.addListener("click", () => {
            infowindow.open(map, marker);
          });
        }
        
        // Optional: Pan map to the marker
        map.panTo(location);
        
      } else {
        console.error(`Geocode failed for "${placeName}":`, status);
      }
    });
  }

  // Fetch and process your API data
  fetch('http://localhost:80/SmileConnector/backend/displaymap.php?type=location')
    .then(res => res.json())
    .then(data => {
      if (!data) {
        console.error('No data received from API');
        return;
      }

      data.forEach(loc => {
        // Use actual data from your API response
        addMarkerByPlaceName(
          map,
          `${loc.school}, ${loc.location}`, // Combine school and location for better geocoding
          loc.school, // Title
          `${loc.cavities} cavities</br>${loc.gumdisease} gum disease</br>${loc.toothloss} tooth loss</br>${loc.other} other issues`, // Content
          "blue" // You can make this dynamic based on your data if needed
        );
      });
    })
    .catch(error => {
      console.error('Error fetching data:', error);
    });
}

    document.addEventListener('DOMContentLoaded', function() {
    // Function to check if element is in viewport
    function isInViewport(element) {
        const rect = element.getBoundingClientRect();
        return (
            rect.top <= (window.innerHeight || document.documentElement.clientHeight) &&
            rect.bottom >= 0
        );
    }

    

    //fetching the key
    document.addEventListener('DOMContentLoaded', function() {
        
        fetch('/api/maps-key')
        .then(res => {
            if (!res.ok) throw new Error('Failed to fetch API key');
            return res.json();
        })
        .then(data => {
            const script = document.createElement('script');
            script.src = `https://maps.googleapis.com/maps/api/js?key=${data.apiKey}&callback=initMap`;
            script.async = true;
            script.defer = true;
            script.onerror = () => console.error('Failed to load Google Maps API');
            document.head.appendChild(script);
        })
        .catch(err => {
            console.error('Error loading Google Maps:', err);
            document.getElementById('map').innerHTML = '<p>Error loading map. Please try again later.</p>';
        });
});

    // Function to animate counting
    function animateCount(element) {
        const target = parseInt(element.getAttribute('data-target'));
        const duration = 2000; // Animation duration in ms
        const start = 0;
        const increment = target / (duration / 16); // 60fps
        
        let current = start;
        const timer = setInterval(() => {
            current += increment;
            if (current >= target) {
                clearInterval(timer);
                current = target;
            }
            element.textContent = target === 95 ? 
                Math.floor(current) + '%' : 
                Math.floor(current).toLocaleString() + (target === 15000 ? '+' : '+');
        }, 16);
    }

    // Function to handle scroll event
    function handleScroll() {
        const metricValues = document.querySelectorAll('.metric-value');
        metricValues.forEach(value => {
            if (isInViewport(value) && !value.classList.contains('animated')) {
                value.classList.add('animated');
                animateCount(value);
            }
        });
    }

    
    handleScroll();
    
    // Add scroll event listener
    window.addEventListener('scroll', handleScroll);
});
 document.getElementById('loginBtn').addEventListener('click', function() {
        console.log("Attempting to open: logins/login.html");
        window.location.href = '../logins/login.html';
    });
    document.getElementById('signupBtn').addEventListener('click', function() {
        console.log("Attempting to open: logins/register.html");
        window.location.href = '../logins/EmailRegister.html';
    });

    
</script>
</body>
</html>